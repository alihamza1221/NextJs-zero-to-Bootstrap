(()=>{var e={};e.id=181,e.ids=[181],e.modules={67096:e=>{"use strict";e.exports=require("bcrypt")},11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},46625:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(19134),r(35866),r(85724);var s=r(23191),a=r(88716),i=r(37922),n=r.n(i),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["(client)",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19134)),"C:\\Users\\aliha\\Desktop\\Nextjs\\NextJs-zero-to-Bootstrap\\Next_Bootstrap\\app\\(client)\\dashboard\\page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,85724)),"C:\\Users\\aliha\\Desktop\\Nextjs\\NextJs-zero-to-Bootstrap\\Next_Bootstrap\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\aliha\\Desktop\\Nextjs\\NextJs-zero-to-Bootstrap\\Next_Bootstrap\\app\\(client)\\dashboard\\page.tsx"],u="/(client)/dashboard/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(client)/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},75197:(e,t,r)=>{Promise.resolve().then(r.bind(r,85050))},17828:(e,t,r)=>{Promise.resolve().then(r.bind(r,2246)),Promise.resolve().then(r.bind(r,29394))},80860:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},85050:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(10326),a=r(79740);function i({username:e,email:t}){return(0,s.jsxs)(a.Card,{color:"transparent",shadow:!1,className:"w-full max-w-[26rem]",children:[s.jsx(a.CardHeader,{color:"transparent",floated:!1,shadow:!1,className:"mx-0 flex items-center gap-4 pt-0 pb-8",children:(0,s.jsxs)("div",{className:"flex w-full flex-col gap-0.5",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:e})}),s.jsx(a.Typography,{color:"blue-gray",children:t})]})}),s.jsx(a.CardBody,{className:"mb-6 p-0",children:s.jsx(a.Typography,{className:"inline-block bg-gray-300 p-1 rounded-sm",children:'"Verified User"'})})]})}var n=r(8059),o=r(17577);let l=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}),c=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))});function d({ProfileUrl:e}){let[t,r]=(0,n.m9)(),[i,d]=(0,o.useState)(!1);return s.jsx("div",{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[s.jsx(a.Typography,{variant:"lead",children:e}),s.jsx(a.IconButton,{onMouseLeave:()=>d(!1),onClick:()=>{r(e),d(!0)},children:i?s.jsx(l,{className:"h-5 w-5 text-white"}):s.jsx(c,{className:"h-5 w-5 text-white"})})]})})}var u=r(35047),p=r(9007),h=r(44099),m=r(77109),x=r(29394);let g=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M2.25 2.25a.75.75 0 0 0 0 1.5H3v10.5a3 3 0 0 0 3 3h1.21l-1.172 3.513a.75.75 0 0 0 1.424.474l.329-.987h8.418l.33.987a.75.75 0 0 0 1.422-.474l-1.17-3.513H18a3 3 0 0 0 3-3V3.75h.75a.75.75 0 0 0 0-1.5H2.25Zm6.04 16.5.5-1.5h6.42l.5 1.5H8.29Zm7.46-12a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6Zm-3 2.25a.75.75 0 0 0-1.5 0v3.75a.75.75 0 0 0 1.5 0V9Zm-3 2.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5Z",clipRule:"evenodd"}))}),f=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M6.912 3a3 3 0 0 0-2.868 2.118l-2.411 7.838a3 3 0 0 0-.133.882V18a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0 0 17.088 3H6.912Zm13.823 9.75-2.213-7.191A1.5 1.5 0 0 0 17.088 4.5H6.912a1.5 1.5 0 0 0-1.434 1.059L3.265 12.75H6.11a3 3 0 0 1 2.684 1.658l.256.513a1.5 1.5 0 0 0 1.342.829h3.218a1.5 1.5 0 0 0 1.342-.83l.256-.512a3 3 0 0 1 2.684-1.658h2.844Z",clipRule:"evenodd"}))}),v=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}),w=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}),j=o.forwardRef(function({title:e,titleId:t,...r},s){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))});function y(){let[e,t]=(0,o.useState)(!1),[r,n]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[y,b]=(0,o.useState)([]),{data:N,status:P,update:q}=(0,m.useSession)(),E=(0,u.useRouter)(),C=async e=>{if(r){console.log("Already in progress!!"),x.Am.info("State already in Progress");return}if(n(!0),!N||!N.user){console.log("User Not authorized!");return}let{username:t}=N.user,s=await h.Z.post("/api/acceptMessages",{username:t,isAcceptingMessages:e});s.data.success?x.Am.success(s.data.message):x.Am.error(s.data.message),n(!1)},A=(0,o.useCallback)(async()=>{c(!0);try{let e=await h.Z.get("/api/getMessages");if(e.data.success)return e.data?.messages;throw Error(e.data.message||"Error fetching messages")}catch(e){x.Am.error(e.message)}finally{c(!1)}},[b]),S="";try{S=window.location.host}catch(e){console.error(e.message)}let _=`${S}/u/${N?.user.username}`;return e?s.jsx("div",{className:"flex w-full h-screen justify-center items-center",children:s.jsx(p.j,{})}):(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)(a.Card,{className:"h-[calc(100vh-2rem)] w-full max-w-[20rem] p-4 shadow-xl shadow-blue-gray-900/5",children:[s.jsx("div",{className:"mb-2 p-4",children:s.jsx(a.Typography,{variant:"h5",color:"blue-gray",children:"Sidebar"})}),(0,s.jsxs)(a.List,{children:[(0,s.jsxs)(a.ListItem,{children:[s.jsx(a.ListItemPrefix,{children:s.jsx(g,{className:"h-5 w-5"})}),"Dashboard"]}),(0,s.jsxs)(a.ListItem,{children:[s.jsx(a.ListItemPrefix,{children:s.jsx(f,{className:"h-5 w-5"})}),"Inbox",s.jsx(a.ListItemSuffix,{children:s.jsx(a.Chip,{value:"14",size:"sm",variant:"ghost",color:"blue-gray",className:"rounded-full"})})]}),(0,s.jsxs)(a.ListItem,{onClick:()=>{E.replace("dashboard")},children:[s.jsx(a.ListItemPrefix,{children:s.jsx(v,{className:"h-5 w-5"})}),"Profile"]}),(0,s.jsxs)(a.ListItem,{children:[s.jsx(a.ListItemPrefix,{children:s.jsx(w,{className:"h-5 w-5"})}),"Settings"]}),(0,s.jsxs)(a.ListItem,{onClick:()=>(0,m.signOut)(),children:[s.jsx(a.ListItemPrefix,{children:s.jsx(j,{className:"h-5 w-5"})}),"Log Out"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-start flex-col w-full h-full bg-white rounded-md shadow-md p-5 m-2",children:[s.jsx(a.Typography,{variant:"h2",children:"User Dashboard"}),s.jsx(i,{username:N?.user.username||"User",email:N?.user.email||"example@email.com"}),(0,s.jsxs)("div",{className:"block",children:[s.jsx(a.Typography,{variant:"paragraph",children:"Are you Accepting Messages?"})," ",s.jsx(a.Switch,{defaultChecked:N?.user.isAcceptingMessages,onChange:async e=>{let t=e.target.checked;await C(t),q({isAcceptingMessages:t})},crossOrigin:void 0})]}),s.jsx(d,{ProfileUrl:_}),(0,s.jsxs)("div",{className:"mt-6 right",children:[s.jsx(a.Button,{loading:l,variant:"text",className:"rounded-full",onClick:async()=>{let e=await A();console.log(e),b(e)},children:"Toggle Messages"}),s.jsx("div",{className:"float-right gap-3 rounded-lg  flex flex-col bg-gray-50 w-1/2 h-full",children:y&&y.map((e,t)=>s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex justify-between w-full rounded-lg bg-light-white shadow-sm mb-3  p-3",children:[(0,s.jsxs)(a.Typography,{variant:"lead",children:[t," : ",e.content]})," ",s.jsx(a.Typography,{variant:"paragraph",children:e.createdAt.toString()})]},e._id)}))})]})]})]})}},9007:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var s=r(10326),a=r(79740);function i(){return s.jsx("div",{className:"flex gap-8",children:s.jsx(a.Spinner,{color:"blue"})})}},2246:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(10326),a=r(77109);function i({children:e,session:t}){return s.jsx(a.SessionProvider,{session:t,children:e})}},35047:(e,t,r)=>{"use strict";var s=r(77389);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},19134:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var s=r(68570);let a=(0,s.createProxy)(String.raw`C:\Users\aliha\Desktop\Nextjs\NextJs-zero-to-Bootstrap\Next_Bootstrap\app\(client)\dashboard\page.tsx`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,s.createProxy)(String.raw`C:\Users\aliha\Desktop\Nextjs\NextJs-zero-to-Bootstrap\Next_Bootstrap\app\(client)\dashboard\page.tsx#default`)},26386:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var s=r(45256),a=r(93227),i=r(53797),n=r(67096),o=r.n(n);let l={providers:[(0,i.Z)({id:"credentials",name:"Credentials",credentials:{email:{label:"Email",type:"text",placeholder:"johnDoe@gmail.com"},password:{label:"Password",type:"password"}},async authorize(e){await (0,s.Z)();let{email:t}=e.identifier;try{let r=await a.Z.findOne({$or:[{email:t},{username:e.identifier}]});if(console.log(r),r){if(!r.isVerified)throw Error("User is not verified")}else throw Error("User does't exist");if(!await o().compare(e.password,r.password))throw Error("Password is incorrect");return r}catch(e){throw console.log(e.message),Error(e)}}})],callbacks:{jwt:async({token:e,user:t,trigger:r,session:s})=>(t&&(e._id=t._id?.toString(),e.isVerified=t.isVerified,e.username=t.username,e.isAcceptingMessages=t.isAcceptingMessages,e.email=t.email),"update"===r&&(console.log("triggered",s),s?.isAcceptingMessages!==void 0&&(console.log("session defined"),e.isAcceptingMessages=s.isAcceptingMessages)),e),session:async({session:e,token:t})=>(e.user._id=t._id,e.user.isVerified=t.isVerified,e.user.username=t.username,e.user.isAcceptingMessages=t.isAcceptingMessages,e)},session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET}},85724:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>x});var s=r(19510),a=r(77366),i=r.n(a),n=r(26386);r(67272);var o=r(68570);let l=(0,o.createProxy)(String.raw`C:\Users\aliha\Desktop\Nextjs\NextJs-zero-to-Bootstrap\Next_Bootstrap\context\AuthProvider.tsx`),{__esModule:c,$$typeof:d}=l;l.default;let u=(0,o.createProxy)(String.raw`C:\Users\aliha\Desktop\Nextjs\NextJs-zero-to-Bootstrap\Next_Bootstrap\context\AuthProvider.tsx#default`);var p=r(45609);r(71159);var h=r(96557);function m(){return s.jsx(h.Ix,{})}r(97001);let x={title:"Next.js 0 to Bootstrap",description:"Learn Next.js and Bootstrap your own Sass Projects Let's build our own ideas."};async function g({children:e}){let t=await (0,p.getServerSession)(n.N);return s.jsx(u,{session:t,children:s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:` ${i().className}`,children:[e,s.jsx(m,{})]})})})}},45256:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(11185),a=r.n(s);let i={};async function n(){if(i.isConnected)return console.log("using existing connection"),!0;try{let e=await a().connect(process.env.MONGODB_URI||"");return i.isConnected=e.connections[0].readyState,console.log("new connection: "+i.isConnected),1==i.isConnected||Error("DB connection failed")}catch(e){return console.log(e),!1}}},93227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(11185),a=r.n(s);let i=new s.Schema({content:{type:String,required:[!0,"Pleas add some content!"]},createdAt:{type:Date,required:!0,default:Date.now}}),n=new s.Schema({email:{type:String,required:[!0,"Pleas add some content!"],unique:!0,trim:!0,lowercase:!0,match:[/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,"Please fill a valid email address"]},username:{type:String,required:!0,trim:!0,minlength:2},password:{type:String,required:[!0,"username can't be empty"],trim:!0,minlength:2},verificationCode:{type:String,required:[!0,"verification code is required"]},verificationCodeExpiration:{type:Date,required:[!0,"verification code expiry is required"]},isVerified:{type:Boolean,default:!1,required:!0},isAcceptingMessages:{type:Boolean,default:!0},messages:[i]}),o=a().models.User||a().model("User",n)},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,857,432,99,740,59],()=>r(46625));module.exports=s})();