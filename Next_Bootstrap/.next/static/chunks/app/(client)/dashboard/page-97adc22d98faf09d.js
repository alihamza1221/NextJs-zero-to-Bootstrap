(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[181],{23319:function(e,a,l){Promise.resolve().then(l.bind(l,54953))},54953:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return b}});var s=l(57437),t=l(53780);function r(e){let{username:a,email:l}=e;return(0,s.jsxs)(t.Card,{color:"transparent",shadow:!1,className:"w-full max-w-[26rem]",children:[(0,s.jsx)(t.CardHeader,{color:"transparent",floated:!1,shadow:!1,className:"mx-0 flex items-center gap-4 pt-0 pb-8",children:(0,s.jsxs)("div",{className:"flex w-full flex-col gap-0.5",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(t.Typography,{variant:"h5",color:"blue-gray",children:a})}),(0,s.jsx)(t.Typography,{color:"blue-gray",children:l})]})}),(0,s.jsx)(t.CardBody,{className:"mb-6 p-0",children:(0,s.jsx)(t.Typography,{className:"inline-block bg-gray-300 p-1 rounded-sm",children:'"Verified User"'})})]})}var n=l(70750),i=l(2265);let c=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}),o=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))});function d(e){let{ProfileUrl:a}=e,[l,r]=(0,n.m9)(),[d,u]=(0,i.useState)(!1);return(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,s.jsx)(t.Typography,{variant:"lead",children:a}),(0,s.jsx)(t.IconButton,{onMouseLeave:()=>u(!1),onClick:()=>{r(a),u(!0)},children:d?(0,s.jsx)(c,{className:"h-5 w-5 text-white"}):(0,s.jsx)(o,{className:"h-5 w-5 text-white"})})]})})}var u=l(16463),h=l(65101),m=l(38472),f=l(30998),g=l(23580);let x=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{fillRule:"evenodd",d:"M2.25 2.25a.75.75 0 0 0 0 1.5H3v10.5a3 3 0 0 0 3 3h1.21l-1.172 3.513a.75.75 0 0 0 1.424.474l.329-.987h8.418l.33.987a.75.75 0 0 0 1.422-.474l-1.17-3.513H18a3 3 0 0 0 3-3V3.75h.75a.75.75 0 0 0 0-1.5H2.25Zm6.04 16.5.5-1.5h6.42l.5 1.5H8.29Zm7.46-12a.75.75 0 0 0-1.5 0v6a.75.75 0 0 0 1.5 0v-6Zm-3 2.25a.75.75 0 0 0-1.5 0v3.75a.75.75 0 0 0 1.5 0V9Zm-3 2.25a.75.75 0 0 0-1.5 0v1.5a.75.75 0 0 0 1.5 0v-1.5Z",clipRule:"evenodd"}))}),v=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{fillRule:"evenodd",d:"M6.912 3a3 3 0 0 0-2.868 2.118l-2.411 7.838a3 3 0 0 0-.133.882V18a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0 0 17.088 3H6.912Zm13.823 9.75-2.213-7.191A1.5 1.5 0 0 0 17.088 4.5H6.912a1.5 1.5 0 0 0-1.434 1.059L3.265 12.75H6.11a3 3 0 0 1 2.684 1.658l.256.513a1.5 1.5 0 0 0 1.342.829h3.218a1.5 1.5 0 0 0 1.342-.83l.256-.512a3 3 0 0 1 2.684-1.658h2.844Z",clipRule:"evenodd"}))}),w=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{fillRule:"evenodd",d:"M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z",clipRule:"evenodd"}))}),p=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{fillRule:"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 0 0-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 0 0-2.282.819l-.922 1.597a1.875 1.875 0 0 0 .432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 0 0 0 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 0 0-.432 2.385l.922 1.597a1.875 1.875 0 0 0 2.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 0 0 2.28-.819l.923-1.597a1.875 1.875 0 0 0-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 0 0 0-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 0 0-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 0 0-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 0 0-1.85-1.567h-1.843ZM12 15.75a3.75 3.75 0 1 0 0-7.5 3.75 3.75 0 0 0 0 7.5Z",clipRule:"evenodd"}))}),j=i.forwardRef(function(e,a){let{title:l,titleId:s,...t}=e;return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":s},t),l?i.createElement("title",{id:s},l):null,i.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v9a.75.75 0 0 1-1.5 0V3a.75.75 0 0 1 .75-.75ZM6.166 5.106a.75.75 0 0 1 0 1.06 8.25 8.25 0 1 0 11.668 0 .75.75 0 1 1 1.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))});function b(){let[e,a]=(0,i.useState)(!1),[l,n]=(0,i.useState)(!1),[c,o]=(0,i.useState)(!1),[b,y]=(0,i.useState)([]),{data:N,status:E,update:k}=(0,f.useSession)();(0,i.useEffect)(()=>{console.log("useEffect: ",null==N?void 0:N.user.isAcceptingMessages)},[null==N?void 0:N.user.isAcceptingMessages]);let C=(0,u.useRouter)(),L=async e=>{if(l){console.log("Already in progress!!"),g.Am.info("State already in Progress");return}if(n(!0),!N||!N.user){console.log("User Not authorized!");return}let{username:a}=N.user,s=await m.Z.post("/api/acceptMessages",{username:a,isAcceptingMessages:e});s.data.success?g.Am.success(s.data.message):g.Am.error(s.data.message),n(!1)},R=(0,i.useCallback)(async()=>{o(!0);try{let a=await m.Z.get("/api/getMessages");if(a.data.success){var e;return null===(e=a.data)||void 0===e?void 0:e.messages}throw Error(a.data.message||"Error fetching messages")}catch(e){g.Am.error(e.message)}finally{o(!1)}},[y]),A="";try{A=window.location.host}catch(e){console.error(e.message)}let M="".concat(A,"/u/").concat(null==N?void 0:N.user.username);return e?(0,s.jsx)("div",{className:"flex w-full h-screen justify-center items-center",children:(0,s.jsx)(h.j,{})}):(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsxs)(t.Card,{className:"h-[calc(100vh-2rem)] w-full max-w-[20rem] p-4 shadow-xl shadow-blue-gray-900/5",children:[(0,s.jsx)("div",{className:"mb-2 p-4",children:(0,s.jsx)(t.Typography,{variant:"h5",color:"blue-gray",children:"Sidebar"})}),(0,s.jsxs)(t.List,{children:[(0,s.jsxs)(t.ListItem,{children:[(0,s.jsx)(t.ListItemPrefix,{children:(0,s.jsx)(x,{className:"h-5 w-5"})}),"Dashboard"]}),(0,s.jsxs)(t.ListItem,{children:[(0,s.jsx)(t.ListItemPrefix,{children:(0,s.jsx)(v,{className:"h-5 w-5"})}),"Inbox",(0,s.jsx)(t.ListItemSuffix,{children:(0,s.jsx)(t.Chip,{value:"14",size:"sm",variant:"ghost",color:"blue-gray",className:"rounded-full"})})]}),(0,s.jsxs)(t.ListItem,{onClick:()=>{C.replace("dashboard")},children:[(0,s.jsx)(t.ListItemPrefix,{children:(0,s.jsx)(w,{className:"h-5 w-5"})}),"Profile"]}),(0,s.jsxs)(t.ListItem,{children:[(0,s.jsx)(t.ListItemPrefix,{children:(0,s.jsx)(p,{className:"h-5 w-5"})}),"Settings"]}),(0,s.jsxs)(t.ListItem,{onClick:()=>(0,f.signOut)(),children:[(0,s.jsx)(t.ListItemPrefix,{children:(0,s.jsx)(j,{className:"h-5 w-5"})}),"Log Out"]})]})]}),(0,s.jsxs)("div",{className:"flex justify-start flex-col w-full h-full bg-white rounded-md shadow-md p-5 m-2",children:[(0,s.jsx)(t.Typography,{variant:"h2",children:"User Dashboard"}),(0,s.jsx)(r,{username:(null==N?void 0:N.user.username)||"User",email:(null==N?void 0:N.user.email)||"example@email.com"}),(0,s.jsxs)("div",{className:"block",children:[(0,s.jsx)(t.Typography,{variant:"paragraph",children:"Are you Accepting Messages?"})," ",(0,s.jsx)(t.Switch,{defaultChecked:null==N?void 0:N.user.isAcceptingMessages,onChange:async e=>{let a=e.target.checked;await L(a),k({isAcceptingMessages:a})},crossOrigin:void 0})]}),(0,s.jsx)(d,{ProfileUrl:M}),(0,s.jsxs)("div",{className:"mt-6 right",children:[(0,s.jsx)(t.Button,{loading:c,variant:"text",className:"rounded-full",onClick:async()=>{let e=await R();console.log(e),y(e)},children:"Toggle Messages"}),(0,s.jsx)("div",{className:"float-right gap-3 rounded-lg  flex flex-col bg-gray-50 w-1/2 h-full",children:b&&b.map((e,a)=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex justify-between w-full rounded-lg bg-light-white shadow-sm mb-3  p-3",children:[(0,s.jsxs)(t.Typography,{variant:"lead",children:[a," : ",e.content]})," ",(0,s.jsx)(t.Typography,{variant:"paragraph",children:e.createdAt.toString()})]},e._id)}))})]})]})]})}},65101:function(e,a,l){"use strict";l.d(a,{j:function(){return r}});var s=l(57437),t=l(53780);function r(){return(0,s.jsx)("div",{className:"flex gap-8",children:(0,s.jsx)(t.Spinner,{color:"blue"})})}},16463:function(e,a,l){"use strict";var s=l(71169);l.o(s,"useParams")&&l.d(a,{useParams:function(){return s.useParams}}),l.o(s,"useRouter")&&l.d(a,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[590,580,472,255,998,750,971,23,744],function(){return e(e.s=23319)}),_N_E=e.O()}]);